%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%=======================================================================================================%
%====================================== Advanced Machine Learning ======================================% 
%========================================= Team O - SVR vs LWPR ========================================%
%==================================== BRODARD Lionel, BELLAHSENE Allan =================================%
%========================================== Data - Visualisation =======================================%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

clear; close all; clc;

%% Imports data

funds_Returns = readtable(fullfile('..', 'data', 'CLEANED', 'Funds_Returns.dat'));
commodities_Returns = readtable(fullfile('..', 'data', 'CLEANED', 'commodities_Return.dat'));
yields = readtable(fullfile('..', 'data', 'CLEANED', 'Yields.dat'));
indices_Returns = readtable(fullfile('..', 'data', 'CLEANED', 'marketIndices_Returns.dat'));
xrate_Changes = readtable(fullfile('..', 'data', 'CLEANED', 'exchangeRates_Changes.dat'));

%% Create Equal Weighted Portfolio

portfolio_Return(:,1)=funds_Returns(:,1); 
portfolio_Return(:,2)=array2table(1/5*(table2array(funds_Returns(:,2))+table2array(funds_Returns(:,3)) +table2array(funds_Returns(:,4)) +table2array(funds_Returns(:,5)) +table2array(funds_Returns(:,6)) ));
portfolio_Return.Properties.VariableNames={'Date' 'y_t' };

%%
% Join Yields
X_T = innerjoin(portfolio_Return, yields,'LeftKeys',1,'RightKeys',1);
X_T = innerjoin(X_T, indices_Returns,'LeftKeys',1,'RightKeys',1);
X_T = innerjoin(X_T, commodities_Returns,'LeftKeys',1,'RightKeys',1);
X_T = innerjoin(X_T, xrate_Changes,'LeftKeys',1,'RightKeys',1);
X_T.y_t=[];

X_m=table2array(X_T(1:end-1,2:end));
X(:,1)= X_T
